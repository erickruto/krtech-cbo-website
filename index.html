<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Krtech CBO</title>

  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-5qz1Thj3A2ZzQ8K8HgY2V8cMW6nJvM5XqSgvjZ6pN1f2n2EC5BvMyoDpYdOZg8WQ4Ahv0tOic+umz2bSzT3qkA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <style>
    /* Contact Section */
    .contact {
      padding: 3rem 2rem;
      background: #f9f9f9;
    }
    .contact h2 {
      text-align: center;
      margin-bottom: 1rem;
      color: #2c5530;
    }
    .contact-wrapper {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      margin-top: 2rem;
    }
    .contact-form, .contact-info {
      flex: 1;
      min-width: 300px;
    }
    .contact-form label {
      display: block;
      margin: 0.5rem 0 0.2rem;
      font-weight: 600;
    }
    .contact-form input, 
    .contact-form textarea {
      width: 100%;
      padding: 0.8rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-bottom: 1rem;
      font-family: inherit;
    }
    .contact-form button {
      background: #2c5530;
      color: #fff;
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.3s;
    }
    .contact-form button:hover {
      background: #1e3e22;
    }

    /* Response message styles */
    .form-response {
      margin-top: 0.5rem;
      font-size: 0.9rem;
      display: none;
    }
    .form-response.success {
      color: green;
      display: block;
    }
    .form-response.error {
      color: red;
      display: block;
    }

    /* WhatsApp Floating Button */
    .whatsapp-float {
      position: fixed;
      width: 60px;
      height: 60px;
      bottom: 20px;
      right: 20px;
      background-color: #25D366;
      color: #fff;
      border-radius: 50%;
      text-align: center;
      font-size: 30px;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
      z-index: 1000;
      transition: transform 0.2s;
    }
    .whatsapp-float i {
      margin-top: 15px;
    }
    .whatsapp-float:hover {
      transform: scale(1.1);
      background-color: #1ebe5b;
    }
  </style>
</head>
<body>

  <!-- Contact Section -->
  <section class="contact">
    <h2>Contact Us</h2>
    <div class="contact-wrapper">

      <!-- Contact Form -->
      <div class="contact-form">
        <form id="contactForm" action="https://formspree.io/f/mqalvkao" method="POST">
          <label for="name">Name</label>
          <input type="text" id="name" name="name" required>

          <label for="email">Email</label>
          <input type="email" id="email" name="_replyto" required>

          <label for="message">Message</label>
          <textarea id="message" name="message" rows="5" required></textarea>

          <button type="submit">Send Message</button>
          <div id="formResponse" class="form-response"></div>
        </form>
      </div>

      <!-- Contact Info -->
      <div class="contact-info">
        <h3>Visit Us</h3>
        <p><i class="fas fa-map-marker-alt"></i> Krtech CBO<br>Maralal Town, Samburu County, Kenya</p>
        <p><i class="fas fa-envelope"></i> info@krtech.org</p>
        <p><i class="fas fa-phone"></i> +254 713 525 947</p>
        
        <!-- Google Map -->
        <div class="map-container">
          <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d63712.12837484533!2d36.781190049999996!3d1.1031797999999946!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x1784f21ef88caa7b%3A0xa83694c241bb7c2d!2sMaralal!5e0!3m2!1sen!2ske!4v1723987200000!5m2!1sen!2ske" 
            width="100%" height="300" style="border:0;" allowfullscreen="" loading="lazy">
          </iframe>
        </div>
      </div>
    </div>
  </section>

  <!-- Floating WhatsApp Button -->
  <a id="whatsappBtn" class="whatsapp-float" target="_blank" title="Chat with us on WhatsApp">
    <i class="fab fa-whatsapp"></i>
  </a>

  <script>
    // Configurable WhatsApp Setup
    const whatsappNumber = "254713525947";  // <--- replace with your number
    const defaultMessage = "Hello Krtech, I would like more information about your services.";
    
    // Set WhatsApp link dynamically
    const whatsappBtn = document.getElementById("whatsappBtn");
    whatsappBtn.href = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(defaultMessage)}`;

    // Handle Form Response (Formspree)
    const contactForm = document.getElementById("contactForm");
    const formResponse = document.getElementById("formResponse");

    contactForm.addEventListener("submit", async function(e) {
      e.preventDefault();
      const formData = new FormData(contactForm);
      try {
        const response = await fetch(contactForm.action, {
          method: "POST",
          body: formData,
          headers: { 'Accept': 'application/json' }
        });
        if (response.ok) {
          formResponse.textContent = "✅ Thank you! Your message has been sent.";
          formResponse.className = "form-response success";
          contactForm.reset();
        } else {
          formResponse.textContent = "❌ Oops! Something went wrong, please try again.";
          formResponse.className = "form-response error";
        }
      } catch (error) {
        formResponse.textContent = "❌ Network error, please check your connection.";
        formResponse.className = "form-response error";
      }
    });
  </script>
</body>
</html>
